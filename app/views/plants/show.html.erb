<div class="container">
  <% if current_user == @plant.user %>
    <div class="d-flex justify-content-center show-notification">
      <%= link_to user_path do %>
        <p>Guess What? You own this plant! Congratulations! <br> Click here to return to your profile and see more of your plants</p>
      <% end %>
    </div>
  <% end %>

  <div class="show-plant">
    <div>
      <% if @plant.photo.attached? %>
        <%= cl_image_tag @plant.photo.key, height: 300, width: 400, crop: :fill, class: "show-plant-image" %>
      <% end %>

    </div>
    <div class="show-info">
      <div class="show-details">
        <div>
          <% if @plant.category == "tree" %>
            <h3><i class="fas fa-tree"></i> <%= @plant.name %></h3>
          <% elsif @plant.category == "flower" %>
            <h3><i class="fas fa-fan"> </i> <%= @plant.name %></h3>
          <% elsif @plant.category == "bush" %>
            <h3><i class="fab fa-pagelines"></i> <%= @plant.name %></h3>
          <% else %>
            <h3><i class="fas fa-cannabis"></i> <%= @plant.name %></h3>
          <% end %>
        </div>
        <div><h3>£<%= @plant.price %></h3></div>
      </div>
      <div class="show-description"><%= @plant.description %></div>
        <form class="show-form">
          <div class="show-input">
            <label for="quantity">Quantity</label>
            <input id="quantity" name="quantity" type="number" value="1" min="1" increment="1">
          </div>
          <div class="show-input">
            <label for="total">Total</label>
            <input id="total" value="£<%= @plant.price %>" disabled>
          </div>
          <div class="show-btns">
            <%= link_to plants_path do %>
              <button class="btn btn-success cancel">Cancel</button>
            <% end %>
            <% if current_user == @plant.user %>
              <%= link_to '#' do %>
                <button class="btn show-btn-color">Buy</button>
              <% end %>
            <% else %>
              <%= link_to new_plant_transaction_path(@plant) do %>
                <button type="submit" class="btn btn-success">Buy</button>
              <% end %>
            <% end %>
          </div>
        </form>
    </div>
  </div>

<script type="text/javascript">
  const quantity = document.getElementById("quantity");
  const total = document.getElementById("total");

  quantity.addEventListener("click", (e) => {
    total.value = `£${ quantity.value * <%= @plant.price %> }`
  })
</script>
