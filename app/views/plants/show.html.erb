<div class="container">

  <div class="show-plant">
    <div>
      <% if @plant.photo.attached? %>
        <%= cl_image_tag @plant.photo.key, height: 300, width: 400, crop: :fill, class: "show-plant-image" %>
      <% end %>

    </div>
    <div class="show-info">
      <div class="show-details">
        <div><h3><%= @plant.name %></h3></div>
        <div><h3>£<%= @plant.price %></h3></div>
      </div>
      <div class="show-description"><%= @plant.description %></div>
      <form class="show-form">
        <div class="show-input">
          <label for="quantity">Quantity</label>
          <input id="quantity" name="quantity" type="number" value="1" min="1" increment="1">
        </div>
        <div class="show-input">
          <label for="total">Total</label>
          <input id="total" value="£<%= @plant.price %>" disabled>
        </div>
        <div class="show-btns">
          <%= link_to plants_path do %>
            <button class="btn btn-success cancel">Cancel</button>
          <% end %>
          <%= link_to new_plant_transaction_path(@plant) do %>
            <button type="submit" class="btn btn-success">Buy</button>
          <% end %>
        </div>
      </form>
    </div>
  </div>
</div>

<script type="text/javascript">
  const quantity = document.getElementById("quantity");
  const total = document.getElementById("total");

  quantity.addEventListener("click", (e) => {
    total.value = `£${ quantity.value * <%= @plant.price %> }`
  })
</script>

<!-- Create a link back to user's home page if they are logged in and the plant belongs to them -->
